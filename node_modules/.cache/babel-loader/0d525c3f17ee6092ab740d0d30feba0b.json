{"ast":null,"code":"import React,{useEffect,useRef}from'react';import Box from'@mui/material/Box';import Drawer from'@mui/material/Drawer';import{useSelector,useDispatch}from'react-redux';import{mapSlice}from'../../redux/mapSlice';import{width}from'@mui/system';import ResultCard from'./resultCard';import{createMarker,deleteMarkers,deleteCircles,createCircle}from'../logics/map';import{getMapObject}from'../logics/map';import{getUserLocation}from'../parts/gMap';import{jsx as _jsx}from\"react/jsx-runtime\";export default function ResultDrawer(props){console.log('drawe');var searchResults=props.results.results;var searchStatus=props.results.status;var lat=props.results.lat;var lng=props.results.lng;var dispatch=useDispatch();var resultsListToggle=useSelector(function(state){return state.mapSlice.resultsListToggle;});var drawerRef=useRef();var scrollFunc=function scrollFunc(amount){drawerRef.current.children[0].scrollTop=amount;};var openFunc=function openFunc(){if(!resultsListToggle)dispatch(mapSlice.actions.setResultsListToggle());};return/*#__PURE__*/_jsx(Drawer,{anchor:\"left\",open:resultsListToggle,variant:\"persistent\",ref:drawerRef,PaperProps:{sx:{marginTop:8,width:400,height:'calc(100vh - 62px)'}},children:/*#__PURE__*/_jsx(Box,{children:function(){var d=[];deleteMarkers();deleteCircles();if(searchStatus=='INITIALIZED'){d.push(/*#__PURE__*/_jsx(ResultCard,{name:\"\\u691C\\u7D22\\u3057\\u3066\\u307F\\u307E\\u3057\\u3087\\u3046\",vicinity:\"\\uD83D\\uDE00\",mode:\"noresults\"},0));return d;}createCircle(lat,lng,1000);if(searchStatus=='NO_RESULTS'){d.push(/*#__PURE__*/_jsx(ResultCard,{name:\"\\u4F55\\u3082\\u898B\\u3064\\u304B\\u308A\\u307E\\u305B\\u3093\\u3067\\u3057\\u305F\\u3002\",vicinity:\"\\uD83E\\uDD7A\",mode:\"noresults\"},0));return d;}for(var i=0;i<searchResults.length;i++){var r=searchResults[i];createMarker(r.lat,r.lng,i,scrollFunc,openFunc,r.name);d.push(/*#__PURE__*/_jsx(ResultCard,{name:r.name,vicinity:r.vicinity,rating:r.rating,reviews:r.reviews,mode:\"data\",eatfree:r.eatfree,drinkfree:r.drinkfree,parking:r.parking,card:r.card,rat:r.rat,privateroom:r.privateroom,google:r.google,hotpepper:r.hotpepper,lat:r.lat,lng:r.lng,photo:r.photo,onClickFunc:function onClickFunc(lat,lng){var loc={lat:lat,lng:lng};var map=getMapObject();map.panTo(loc);map.setZoom(18);}},i));}return d;}()})});}/*\n   \n            \n*/","map":{"version":3,"names":["React","useEffect","useRef","Box","Drawer","useSelector","useDispatch","mapSlice","width","ResultCard","createMarker","deleteMarkers","deleteCircles","createCircle","getMapObject","getUserLocation","ResultDrawer","props","console","log","searchResults","results","searchStatus","status","lat","lng","dispatch","resultsListToggle","state","drawerRef","scrollFunc","amount","current","children","scrollTop","openFunc","actions","setResultsListToggle","sx","marginTop","height","d","push","i","length","r","name","vicinity","rating","reviews","eatfree","drinkfree","parking","card","rat","privateroom","google","hotpepper","photo","loc","map","panTo","setZoom"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/templates/resultDrawer.jsx"],"sourcesContent":["import React, { useEffect , useRef} from 'react';\nimport Box from '@mui/material/Box';\nimport Drawer from '@mui/material/Drawer';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { mapSlice } from '../../redux/mapSlice';\nimport { width } from '@mui/system';\nimport ResultCard from './resultCard';\nimport { createMarker, deleteMarkers, deleteCircles,createCircle } from '../logics/map';\nimport { getMapObject } from '../logics/map';\nimport { getUserLocation } from '../parts/gMap';\n\nexport default function ResultDrawer(props) {\n\n    console.log('drawe');\n    let searchResults = props.results.results;\n    let searchStatus = props.results.status;\n    let lat = props.results.lat;\n    let lng = props.results.lng;\n    const dispatch = useDispatch();\n    let resultsListToggle = useSelector(state => state.mapSlice.resultsListToggle);\n    const drawerRef = useRef();\n\n    const scrollFunc = (amount) => {\n        drawerRef.current.children[0].scrollTop = amount;\n    }\n    const openFunc = () =>{\n\n        if(!resultsListToggle)\n            dispatch(mapSlice.actions.setResultsListToggle());\n\n    }\n\n    return (\n\n        <Drawer\n            anchor='left'\n            open={resultsListToggle}\n            variant=\"persistent\"\n            ref={drawerRef}\n            PaperProps={{\n                sx: {\n                    marginTop: 8,\n                    width: 400,\n                    height: 'calc(100vh - 62px)'\n                }\n            }}\n        >\n\n            <Box>\n                {(() => {\n                    const d = [];\n                    deleteMarkers();\n                    deleteCircles();\n                    \n                    if(searchStatus == 'INITIALIZED'){\n\n                        d.push(<ResultCard name='検索してみましょう' key={0} vicinity='😀' mode='noresults'></ResultCard>);\n                        return d;\n\n                    }\n\n                    createCircle(lat,lng,1000);\n                    if(searchStatus == 'NO_RESULTS'){\n\n                        d.push(<ResultCard name='何も見つかりませんでした。' key={0} vicinity='🥺' mode='noresults'></ResultCard>);\n                        return d;\n                    }\n\n                    \n                    for (let i = 0; i < searchResults.length; i++) {\n                        \n                        let r = searchResults[i];\n\n                        createMarker(r.lat,r.lng,i,scrollFunc,openFunc,r.name);\n\n                        d.push(<ResultCard \n                            key={i}\n                            name={r.name} \n                            vicinity={r.vicinity} \n                            rating={r.rating} \n                            reviews={r.reviews}\n                            mode='data'\n                            eatfree={r.eatfree}\n                            drinkfree={r.drinkfree}\n                            parking={r.parking}\n                            card={r.card}\n                            rat={r.rat}\n                            privateroom={r.privateroom}\n                            google={r.google}\n                            hotpepper={r.hotpepper}\n                            lat={r.lat}\n                            lng={r.lng}\n                            photo={r.photo}\n                            onClickFunc={(lat,lng) => \n                                {let loc = {\n                                    lat: lat,\n                                    lng: lng\n                                };\n                                let map = getMapObject();\n                                map.panTo(loc);\n                                map.setZoom(18);}}\n                            ></ResultCard>);\n                        \n                    }\n                    return d;\n                })()}\n\n            </Box>\n        </Drawer>\n\n    )\n\n\n}\n\n\n\n/*\n   \n            \n*/\n"],"mappings":"AAAA,MAAOA,MAAP,EAAgBC,SAAhB,CAA4BC,MAA5B,KAAyC,OAAzC,CACA,MAAOC,IAAP,KAAgB,mBAAhB,CACA,MAAOC,OAAP,KAAmB,sBAAnB,CACA,OAASC,WAAT,CAAsBC,WAAtB,KAAyC,aAAzC,CACA,OAASC,QAAT,KAAyB,sBAAzB,CACA,OAASC,KAAT,KAAsB,aAAtB,CACA,MAAOC,WAAP,KAAuB,cAAvB,CACA,OAASC,YAAT,CAAuBC,aAAvB,CAAsCC,aAAtC,CAAoDC,YAApD,KAAwE,eAAxE,CACA,OAASC,YAAT,KAA6B,eAA7B,CACA,OAASC,eAAT,KAAgC,eAAhC,C,2CAEA,cAAe,SAASC,aAAT,CAAsBC,KAAtB,CAA6B,CAExCC,OAAO,CAACC,GAAR,CAAY,OAAZ,EACA,GAAIC,cAAa,CAAGH,KAAK,CAACI,OAAN,CAAcA,OAAlC,CACA,GAAIC,aAAY,CAAGL,KAAK,CAACI,OAAN,CAAcE,MAAjC,CACA,GAAIC,IAAG,CAAGP,KAAK,CAACI,OAAN,CAAcG,GAAxB,CACA,GAAIC,IAAG,CAAGR,KAAK,CAACI,OAAN,CAAcI,GAAxB,CACA,GAAMC,SAAQ,CAAGpB,WAAW,EAA5B,CACA,GAAIqB,kBAAiB,CAAGtB,WAAW,CAAC,SAAAuB,KAAK,QAAIA,MAAK,CAACrB,QAAN,CAAeoB,iBAAnB,EAAN,CAAnC,CACA,GAAME,UAAS,CAAG3B,MAAM,EAAxB,CAEA,GAAM4B,WAAU,CAAG,QAAbA,WAAa,CAACC,MAAD,CAAY,CAC3BF,SAAS,CAACG,OAAV,CAAkBC,QAAlB,CAA2B,CAA3B,EAA8BC,SAA9B,CAA0CH,MAA1C,CACH,CAFD,CAGA,GAAMI,SAAQ,CAAG,QAAXA,SAAW,EAAK,CAElB,GAAG,CAACR,iBAAJ,CACID,QAAQ,CAACnB,QAAQ,CAAC6B,OAAT,CAAiBC,oBAAjB,EAAD,CAAR,CAEP,CALD,CAOA,mBAEI,KAAC,MAAD,EACI,MAAM,CAAC,MADX,CAEI,IAAI,CAAEV,iBAFV,CAGI,OAAO,CAAC,YAHZ,CAII,GAAG,CAAEE,SAJT,CAKI,UAAU,CAAE,CACRS,EAAE,CAAE,CACAC,SAAS,CAAE,CADX,CAEA/B,KAAK,CAAE,GAFP,CAGAgC,MAAM,CAAE,oBAHR,CADI,CALhB,uBAcI,KAAC,GAAD,WACM,UAAM,CACJ,GAAMC,EAAC,CAAG,EAAV,CACA9B,aAAa,GACbC,aAAa,GAEb,GAAGU,YAAY,EAAI,aAAnB,CAAiC,CAE7BmB,CAAC,CAACC,IAAF,cAAO,KAAC,UAAD,EAAY,IAAI,CAAC,wDAAjB,CAAqC,QAAQ,CAAC,cAA9C,CAAmD,IAAI,CAAC,WAAxD,EAAkC,CAAlC,CAAP,EACA,MAAOD,EAAP,CAEH,CAED5B,YAAY,CAACW,GAAD,CAAKC,GAAL,CAAS,IAAT,CAAZ,CACA,GAAGH,YAAY,EAAI,YAAnB,CAAgC,CAE5BmB,CAAC,CAACC,IAAF,cAAO,KAAC,UAAD,EAAY,IAAI,CAAC,gFAAjB,CAAyC,QAAQ,CAAC,cAAlD,CAAuD,IAAI,CAAC,WAA5D,EAAsC,CAAtC,CAAP,EACA,MAAOD,EAAP,CACH,CAGD,IAAK,GAAIE,EAAC,CAAG,CAAb,CAAgBA,CAAC,CAAGvB,aAAa,CAACwB,MAAlC,CAA0CD,CAAC,EAA3C,CAA+C,CAE3C,GAAIE,EAAC,CAAGzB,aAAa,CAACuB,CAAD,CAArB,CAEAjC,YAAY,CAACmC,CAAC,CAACrB,GAAH,CAAOqB,CAAC,CAACpB,GAAT,CAAakB,CAAb,CAAeb,UAAf,CAA0BK,QAA1B,CAAmCU,CAAC,CAACC,IAArC,CAAZ,CAEAL,CAAC,CAACC,IAAF,cAAO,KAAC,UAAD,EAEH,IAAI,CAAEG,CAAC,CAACC,IAFL,CAGH,QAAQ,CAAED,CAAC,CAACE,QAHT,CAIH,MAAM,CAAEF,CAAC,CAACG,MAJP,CAKH,OAAO,CAAEH,CAAC,CAACI,OALR,CAMH,IAAI,CAAC,MANF,CAOH,OAAO,CAAEJ,CAAC,CAACK,OAPR,CAQH,SAAS,CAAEL,CAAC,CAACM,SARV,CASH,OAAO,CAAEN,CAAC,CAACO,OATR,CAUH,IAAI,CAAEP,CAAC,CAACQ,IAVL,CAWH,GAAG,CAAER,CAAC,CAACS,GAXJ,CAYH,WAAW,CAAET,CAAC,CAACU,WAZZ,CAaH,MAAM,CAAEV,CAAC,CAACW,MAbP,CAcH,SAAS,CAAEX,CAAC,CAACY,SAdV,CAeH,GAAG,CAAEZ,CAAC,CAACrB,GAfJ,CAgBH,GAAG,CAAEqB,CAAC,CAACpB,GAhBJ,CAiBH,KAAK,CAAEoB,CAAC,CAACa,KAjBN,CAkBH,WAAW,CAAE,qBAAClC,GAAD,CAAKC,GAAL,CACT,CAAC,GAAIkC,IAAG,CAAG,CACPnC,GAAG,CAAEA,GADE,CAEPC,GAAG,CAAEA,GAFE,CAAV,CAID,GAAImC,IAAG,CAAG9C,YAAY,EAAtB,CACA8C,GAAG,CAACC,KAAJ,CAAUF,GAAV,EACAC,GAAG,CAACE,OAAJ,CAAY,EAAZ,EAAiB,CAzBlB,EACEnB,CADF,CAAP,EA4BH,CACD,MAAOF,EAAP,CACH,CAxDA,EADL,EAdJ,EAFJ,CAiFH,CAID;AACA;AACA;AACA"},"metadata":{},"sourceType":"module"}