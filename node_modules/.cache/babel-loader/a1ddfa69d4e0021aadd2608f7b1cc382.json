{"ast":null,"code":"import React,{useEffect}from'react';import Box from'@mui/material/Box';import Drawer from'@mui/material/Drawer';import{useSelector,useDispatch}from'react-redux';import{appSlice}from'../../redux/appSlice';import{wheelSlice}from'../../redux/wheelSlice';import'./style/wheel.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countofSpins=0;export default function Wheel(props){var wheelToggle=useSelector(function(state){return state.app.wheelToggle;});return/*#__PURE__*/_jsx(Drawer,{anchor:\"right\",open:wheelToggle,variant:\"persistent\",PaperProps:{sx:{marginTop:8,width:600,height:600}},children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(WheelMain,{trySearchFunc:props.trySearchFunc})})});}function resizeWheel(){}function WheelMain(props){var wheelContentsSolo=['ラーメン','カレー','ハンバーガー','牛丼','そば','ドーナツ','うどん','中華'];var wheelContentsParty=['焼肉','回転寿司','イタリアン','ハンバーガー','中華','和食','ラーメン','インド料理'];console.log(\"wheel is rendered\");var colorCode=['#FF6961','#FFb480','#F8f38d','#42d6a4','#08cad1','#59adf6','#9d94ff','#c780e8'];var wheelRadius=200;// in px\nvar wheelRotation=useSelector(function(state){return state.wheelSlice.wheelRotation;});var wheelState=useSelector(function(state){return state.wheelSlice.wheelState;});var wheelContents=useSelector(function(state){return state.wheelSlice.wheelContents;});var dispatch=useDispatch();var styleObjectArray=[];var degreePerContents=360/wheelContents.length;var polygon=Math.tan(3.14/wheelContents.length);var sizeofEdge=polygon*wheelRadius;wheelContents.forEach(function(value,index){var colorCode_temp=colorCode[index];if(colorCode_temp==undefined){colorCode_temp='#FFFFFF';}var style={'borderWidth':\"200px \".concat(sizeofEdge,\"px 0\"),'transformOrigin':\"\".concat(sizeofEdge,\"px 200px\"),'left':\"\".concat(wheelRadius-sizeofEdge,\"px\"),'transform':\"rotate(\".concat(index*degreePerContents,\"deg)\"),'borderColor':\"\".concat(colorCode_temp,\" transparent\")};styleObjectArray.push(style);});var wheelSpin=function wheelSpin(){if(wheelState==1){//the Whell is spinning!\nreturn;}countofSpins+=1;var rndSpin=Math.floor(Math.random()*360)+1;var newSpin=5000*countofSpins+rndSpin;dispatch(wheelSlice.actions.setWheelState(1));dispatch(wheelSlice.actions.setRotation(newSpin));var intervalID=setTimeout(function(){dispatch(wheelSlice.actions.setWheelState(0));getResult(newSpin);},10000);};var getResult=function getResult(spin){var resultDegree=spin%360;//clamping WheelRotation to 0 between 360\nvar degreePerContent=360/wheelContents.length;//the size of each pies\nresultDegree-=degreePerContent/2;//handling negative numbers\nresultDegree=360-resultDegree;var temp=resultDegree/degreePerContent;temp=Math.floor(temp);var result=wheelContents[temp];dispatch(appSlice.actions.handleInputField(result));dispatch(appSlice.actions.toggleWheel());props.trySearchFunc(result);};var setToSolo=function setToSolo(){if(wheelState==1){//the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsSolo));};var setToParty=function setToParty(){if(wheelState==1){//the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsParty));};return/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"buttonholder\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:setToSolo,id:\"button-1\",children:\"\\u4E00\\u4EBA\\u3067\"}),/*#__PURE__*/_jsx(\"span\",{onClick:setToParty,id:\"button-2\",children:\"\\u307F\\u3093\\u306A\\u3067\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"tri\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"wheel\",onClick:wheelSpin,children:[/*#__PURE__*/_jsx(\"div\",{id:\"inner-wheel\",style:{transform:\"rotate(\".concat(wheelRotation,\"deg)\")},children:wheelContents.map(function(value,index){return/*#__PURE__*/_jsx(\"div\",{style:styleObjectArray[index],id:\"content\".concat(index),children:/*#__PURE__*/_jsx(\"span\",{children:value})},index);})}),/*#__PURE__*/_jsx(\"div\",{id:\"mid-wheel\"})]})]});}","map":{"version":3,"names":["React","useEffect","Box","Drawer","useSelector","useDispatch","appSlice","wheelSlice","countofSpins","Wheel","props","wheelToggle","state","app","sx","marginTop","width","height","trySearchFunc","resizeWheel","WheelMain","wheelContentsSolo","wheelContentsParty","console","log","colorCode","wheelRadius","wheelRotation","wheelState","wheelContents","dispatch","styleObjectArray","degreePerContents","length","polygon","Math","tan","sizeofEdge","forEach","value","index","colorCode_temp","undefined","style","push","wheelSpin","rndSpin","floor","random","newSpin","actions","setWheelState","setRotation","intervalID","setTimeout","getResult","spin","resultDegree","degreePerContent","temp","result","handleInputField","toggleWheel","setToSolo","setContents","setToParty","transform","map"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/parts/wheel.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport Box from '@mui/material/Box';\nimport Drawer from '@mui/material/Drawer';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { appSlice } from '../../redux/appSlice';\nimport { wheelSlice } from '../../redux/wheelSlice';\nimport './style/wheel.css'\n\nlet countofSpins = 0;\n\nexport default function Wheel(props) {\n\n    let wheelToggle = useSelector(state => state.app.wheelToggle);\n \n    return (\n\n        <Drawer\n            anchor='right'\n            open={wheelToggle}\n            variant=\"persistent\"\n            PaperProps={{\n                sx: {\n                    marginTop: 8,\n                    width: 600,\n                    height: 600,\n                    }\n            }}\n        >\n\n            <Box>\n                <WheelMain  trySearchFunc={props.trySearchFunc}></WheelMain>\n            </Box>\n        </Drawer>\n    )\n\n}\n\nfunction resizeWheel () {\n\n}\n\nfunction WheelMain(props) {\n\n    const wheelContentsSolo = ['ラーメン', 'カレー', 'ハンバーガー', '牛丼', 'そば', 'ドーナツ', 'うどん', '中華'];\n    const wheelContentsParty = ['焼肉', '回転寿司', 'イタリアン', 'ハンバーガー', '中華', '和食', 'ラーメン', 'インド料理'];\n    console.log(\"wheel is rendered\");\n\n    const colorCode = ['#FF6961', '#FFb480', '#F8f38d', '#42d6a4', '#08cad1', '#59adf6', '#9d94ff', '#c780e8'];\n    const wheelRadius = 200; // in px\n\n\n    let wheelRotation = useSelector(state => state.wheelSlice.wheelRotation);\n    let wheelState = useSelector(state => state.wheelSlice.wheelState);\n    let wheelContents = useSelector(state => state.wheelSlice.wheelContents);\n    const dispatch = useDispatch();\n    let styleObjectArray = [];\n    let degreePerContents = 360 / wheelContents.length;\n    let polygon = Math.tan(3.14 / wheelContents.length);\n    let sizeofEdge = polygon * wheelRadius;\n\n    wheelContents.forEach((value, index) => {\n\n        let colorCode_temp = colorCode[index]\n        if (colorCode_temp == undefined) {\n            colorCode_temp = '#FFFFFF';\n        }\n\n        let style = {\n            'borderWidth': `200px ${sizeofEdge}px 0`,\n            'transformOrigin': `${sizeofEdge}px 200px`,\n            'left': `${wheelRadius - sizeofEdge}px`,\n            'transform': `rotate(${(index) * degreePerContents}deg)`,\n            'borderColor': `${colorCode_temp} transparent`\n        }\n\n        styleObjectArray.push(style);\n    })\n\n\n    const wheelSpin = () => {\n\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n\n        countofSpins+=1;\n        let rndSpin = Math.floor(Math.random() * (360)) + 1;\n        let newSpin = (5000 * countofSpins) + rndSpin;\n        dispatch(wheelSlice.actions.setWheelState(1))\n        dispatch(wheelSlice.actions.setRotation(newSpin));\n\n        let intervalID = setTimeout(() => { dispatch(wheelSlice.actions.setWheelState(0)); getResult(newSpin); }, 10000)\n        \n\n    }\n    \n    const getResult = (spin) => {\n        \n        let resultDegree = spin % 360; //clamping WheelRotation to 0 between 360\n        let degreePerContent = 360 / wheelContents.length; //the size of each pies\n\n        resultDegree -= degreePerContent / 2; //handling negative numbers\n\n        resultDegree = 360 - resultDegree;\n    \n        let temp = resultDegree / degreePerContent;\n    \n        temp = Math.floor(temp);\n\n        let result = wheelContents[temp];\n\n        dispatch(appSlice.actions.handleInputField(result));\n        dispatch(appSlice.actions.toggleWheel());\n        props.trySearchFunc(result);\n\n\n      \n\n    }\n\n\n    const setToSolo = () => {\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsSolo));\n    }\n    const setToParty = () => {\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsParty));\n    }\n\n    return (\n        <div id='wrapper'>\n            <div id='buttonholder'>\n                <span onClick={setToSolo} id='button-1'>一人で</span>\n                <span onClick={setToParty} id='button-2'>みんなで</span>\n            </div>\n            <div id='tri'></div>\n            <div id='wheel' onClick={wheelSpin}>\n                <div id='inner-wheel' style={{\n                    transform: `rotate(${wheelRotation}deg)`,\n                }}>\n                    {wheelContents.map((value, index) => <div style=\n                        {styleObjectArray[index]}\n                        key={index}\n                        id={`content${index}`}>\n                        <span>{value}</span></div>)}\n                </div>\n                <div id='mid-wheel' >\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}