{"ast":null,"code":"import { getServiceObject, getUserLocation, getCenter } from './map';\nexport const trySearch = (keyword, useGoogle, useHotPepper) => {\n  let responseHotPepper, responseGoogle, promise1, promise2;\n  let req = {\n    keyword: keyword,\n    radius: 500,\n    userLoc: getCenter(),\n    useGoogle: true,\n    useHotPepper: true,\n    useGurunabi: true,\n    isDone: false\n  };\n\n  if (useHotPepper) {\n    promise1 = axios.get(createHotPepperRequest(req), {\n      adapter: jsonp\n    }).then(response => {\n      responseHotPepper = perseHotPepperResults(response);\n    });\n  }\n\n  if (useGoogle) {\n    promise2 = doGoogleMapSearchPromise(createGoogleRequest(req), getServiceObject()).then(response => {\n      responseGoogle = perseGoogleResults(response);\n    }).catch(status => {\n      responseGoogle = perseGoogleResults(status);\n    });\n  }\n\n  if (promise1 == undefined && promise2 == undefined) return;\n  Promise.all([promise1, promise2]).then(message => {\n    console.log(promise1);\n    console.log(responseHotPepper);\n\n    if (responseGoogle == 'NO_RESULTS' || responseGoogle == undefined || promise1 == undefined) {\n      if (responseHotPepper == 'NO_RESULTS' || responseHotPepper == undefined || promise2 == undefined) {\n        dispatch(mapSlice.actions.setSearchResults([]));\n        dispatch(mapSlice.actions.setSearchStatus('NO_RESULTS'));\n      } else {\n        dispatch(mapSlice.actions.setSearchResults(responseHotPepper));\n        dispatch(mapSlice.actions.setSearchStatus('DO３２NE'));\n      }\n    } else {\n      if (responseHotPepper == 'NO_RESULTS' || responseHotPepper == undefined || promise2 == undefined) {\n        dispatch(mapSlice.actions.setSearchResults(responseGoogle));\n        dispatch(mapSlice.actions.setSearchStatus('DO１１１NE'));\n      } else {\n        let combinedResults = combineResults(responseGoogle, responseHotPepper);\n        dispatch(mapSlice.actions.setSearchResults(combinedResults));\n        dispatch(mapSlice.actions.setSearchStatus('DsONE'));\n      }\n    }\n  });\n};","map":{"version":3,"names":["getServiceObject","getUserLocation","getCenter","trySearch","keyword","useGoogle","useHotPepper","responseHotPepper","responseGoogle","promise1","promise2","req","radius","userLoc","useGurunabi","isDone","axios","get","createHotPepperRequest","adapter","jsonp","then","response","perseHotPepperResults","doGoogleMapSearchPromise","createGoogleRequest","perseGoogleResults","catch","status","undefined","Promise","all","message","console","log","dispatch","mapSlice","actions","setSearchResults","setSearchStatus","combinedResults","combineResults"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/logics/search.js"],"sourcesContent":["\nimport { getServiceObject, getUserLocation, getCenter } from './map';\n\nexport const trySearch = (keyword,useGoogle,useHotPepper) => {\n\n    let responseHotPepper, responseGoogle, promise1, promise2;\n\n    let req = {\n      keyword: keyword,\n      radius: 500,\n      userLoc: getCenter(),\n      useGoogle: true,\n      useHotPepper: true,\n      useGurunabi: true,\n      isDone: false,\n    };\n\n    if (useHotPepper) {\n\n      promise1 = axios.get(createHotPepperRequest(req), {\n        adapter: jsonp\n      }).then((response) => {\n\n        responseHotPepper = perseHotPepperResults(response);\n\n      });\n    }\n    if (useGoogle) {\n\n      promise2 = doGoogleMapSearchPromise(createGoogleRequest(req), getServiceObject()).then((response) => {\n\n\n        responseGoogle = perseGoogleResults(response);\n\n\n\n      }).catch((status) => {\n        responseGoogle = perseGoogleResults(status);\n\n      })\n    }\n    if (promise1 == undefined && promise2 == undefined)\n      return;\n\n\n    Promise.all([promise1, promise2]).then((message) => {\n      console.log(promise1);\n      console.log(responseHotPepper);\n\n      if (responseGoogle == 'NO_RESULTS' || responseGoogle == undefined || promise1 == undefined) {\n        if (responseHotPepper == 'NO_RESULTS' || responseHotPepper == undefined || promise2 == undefined) {\n\n          dispatch(mapSlice.actions.setSearchResults([]));\n          dispatch(mapSlice.actions.setSearchStatus('NO_RESULTS'));\n        } else {\n\n\n          dispatch(mapSlice.actions.setSearchResults(responseHotPepper));\n\n          dispatch(mapSlice.actions.setSearchStatus('DO３２NE'));\n        }\n\n      } else {\n        if (responseHotPepper == 'NO_RESULTS' || responseHotPepper == undefined || promise2 == undefined) {\n\n\n          dispatch(mapSlice.actions.setSearchResults(responseGoogle));\n\n          dispatch(mapSlice.actions.setSearchStatus('DO１１１NE'));\n        } else {\n\n\n          let combinedResults = combineResults(responseGoogle, responseHotPepper);\n\n          dispatch(mapSlice.actions.setSearchResults(combinedResults));\n\n          dispatch(mapSlice.actions.setSearchStatus('DsONE'));\n        }\n\n\n      }\n\n\n\n\n    })};"],"mappings":"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"},"metadata":{},"sourceType":"module"}