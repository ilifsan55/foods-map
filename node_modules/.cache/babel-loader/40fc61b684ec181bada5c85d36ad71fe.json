{"ast":null,"code":"import React from'react';import Box from'@mui/material/Box';import Drawer from'@mui/material/Drawer';import{useSelector,useDispatch}from'react-redux';import{appSlice}from'../../redux/appSlice';import{wheelSlice}from'../../redux/wheelSlice';import'./style/wheel.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countofSpins=0;export default function Wheel(props){var wheelToggle=useSelector(function(state){return state.app.wheelToggle;});return/*#__PURE__*/_jsx(Drawer,{anchor:\"right\",open:wheelToggle,variant:\"persistent\",PaperProps:{sx:{marginTop:8,width:600,height:600}},children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(WheelMain,{trySearchFunc:props.trySearchFunc})})});}function WheelMain(props){var wheelContentsSolo=['ラーメン','カレー','ハンバーガー','牛丼','そば','ドーナツ','うどん','中華'];var wheelContentsParty=['焼肉','回転寿司','イタリアン','ハンバーガー','中華','和食','ラーメン','インド料理'];var colorCode=['#FF6961','#FFb480','#F8f38d','#42d6a4','#08cad1','#59adf6','#9d94ff','#c780e8'];var wheelRadius=200;// in px\nvar wheelRotation=useSelector(function(state){return state.wheelSlice.wheelRotation;});var wheelState=useSelector(function(state){return state.wheelSlice.wheelState;});var wheelContents=useSelector(function(state){return state.wheelSlice.wheelContents;});var dispatch=useDispatch();var styleObjectArray=[];var degreePerContents=360/wheelContents.length;var polygon=Math.tan(3.14/wheelContents.length);var sizeofEdge=polygon*wheelRadius;wheelContents.forEach(function(value,index){var colorCodeTemp=colorCode[index];if(colorCodeTemp==undefined){colorCodeTemp='#FFFFFF';};var style={'borderWidth':\"200px \".concat(sizeofEdge,\"px 0\"),'transformOrigin':\"\".concat(sizeofEdge,\"px 200px\"),'left':\"\".concat(wheelRadius-sizeofEdge,\"px\"),'transform':\"rotate(\".concat(index*degreePerContents,\"deg)\"),'borderColor':\"\".concat(colorCodeTemp,\" transparent\")};styleObjectArray.push(style);});var wheelSpin=function wheelSpin(){if(wheelState==1){// the Whell is spinning!\nreturn;}countofSpins+=1;var rndSpin=Math.floor(Math.random()*360)+1;var newSpin=5000*countofSpins+rndSpin;dispatch(wheelSlice.actions.setWheelState(1));dispatch(wheelSlice.actions.setRotation(newSpin));setTimeout(function(){dispatch(wheelSlice.actions.setWheelState(0));getResult(newSpin);},10000);};var getResult=function getResult(spin){var resultDegree=spin%360;// clamping WheelRotation to 0 between 360\nvar degreePerContent=360/wheelContents.length;// the size of each pies\nresultDegree-=degreePerContent/2;// handling negative numbers\nresultDegree=360-resultDegree;var temp=resultDegree/degreePerContent;temp=Math.floor(temp);var result=wheelContents[temp];dispatch(appSlice.actions.handleInputField(result));dispatch(appSlice.actions.toggleWheel());props.trySearchFunc(result);};var setToSolo=function setToSolo(){if(wheelState==1){// the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsSolo));};var setToParty=function setToParty(){if(wheelState==1){// the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsParty));};return/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"buttonholder\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:setToSolo,id:\"button-1\",children:\"\\u4E00\\u4EBA\\u3067\"}),/*#__PURE__*/_jsx(\"span\",{onClick:setToParty,id:\"button-2\",children:\"\\u307F\\u3093\\u306A\\u3067\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"tri\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"wheel\",onClick:wheelSpin,children:[/*#__PURE__*/_jsx(\"div\",{id:\"inner-wheel\",style:{transform:\"rotate(\".concat(wheelRotation,\"deg)\")},children:wheelContents.map(function(value,index){return/*#__PURE__*/_jsx(\"div\",{style:styleObjectArray[index],id:\"content\".concat(index),children:/*#__PURE__*/_jsx(\"span\",{children:value})},index);})}),/*#__PURE__*/_jsx(\"div\",{id:\"mid-wheel\"})]})]});}","map":{"version":3,"names":["React","Box","Drawer","useSelector","useDispatch","appSlice","wheelSlice","countofSpins","Wheel","props","wheelToggle","state","app","sx","marginTop","width","height","trySearchFunc","WheelMain","wheelContentsSolo","wheelContentsParty","colorCode","wheelRadius","wheelRotation","wheelState","wheelContents","dispatch","styleObjectArray","degreePerContents","length","polygon","Math","tan","sizeofEdge","forEach","value","index","colorCodeTemp","undefined","style","push","wheelSpin","rndSpin","floor","random","newSpin","actions","setWheelState","setRotation","setTimeout","getResult","spin","resultDegree","degreePerContent","temp","result","handleInputField","toggleWheel","setToSolo","setContents","setToParty","transform","map"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/parts/wheel.jsx"],"sourcesContent":["import React from 'react';\nimport Box from '@mui/material/Box';\nimport Drawer from '@mui/material/Drawer';\nimport {useSelector, useDispatch} from 'react-redux';\nimport {appSlice} from '../../redux/appSlice';\nimport {wheelSlice} from '../../redux/wheelSlice';\nimport './style/wheel.css';\nlet countofSpins = 0;\nexport default function Wheel(props) {\n    const wheelToggle = useSelector((state)=> state.app.wheelToggle);\n    return (\n        <Drawer\n            anchor='right'\n            open={wheelToggle}\n            variant=\"persistent\"\n            PaperProps={{\n                sx: {\n                    marginTop: 8,\n                    width: 600,\n                    height: 600,\n                    },\n            }}\n        >\n            <Box>\n                <WheelMain trySearchFunc={props.trySearchFunc}></WheelMain>\n            </Box>\n        </Drawer>\n    );\n}\nfunction WheelMain(props) {\n    const wheelContentsSolo = ['ラーメン', 'カレー', 'ハンバーガー', '牛丼', 'そば', 'ドーナツ', 'うどん', '中華'];\n    const wheelContentsParty = ['焼肉', '回転寿司', 'イタリアン', 'ハンバーガー', '中華', '和食', 'ラーメン', 'インド料理'];\n    const colorCode = ['#FF6961', '#FFb480', '#F8f38d', '#42d6a4', '#08cad1', '#59adf6', '#9d94ff', '#c780e8'];\n    const wheelRadius = 200; // in px\n    const wheelRotation = useSelector((state) => state.wheelSlice.wheelRotation);\n    const wheelState = useSelector((state) => state.wheelSlice.wheelState);\n    const wheelContents = useSelector((state) => state.wheelSlice.wheelContents);\n    const dispatch = useDispatch();\n    const styleObjectArray = [];\n    const degreePerContents = 360 / wheelContents.length;\n    const polygon = Math.tan(3.14 / wheelContents.length);\n    const sizeofEdge = polygon * wheelRadius;\n    wheelContents.forEach((value, index) => {\n        let colorCodeTemp = colorCode[index];\n        if (colorCodeTemp == undefined) {\n            colorCodeTemp = '#FFFFFF';\n        };\n\n        const style = {\n            'borderWidth': `200px ${sizeofEdge}px 0`,\n            'transformOrigin': `${sizeofEdge}px 200px`,\n            'left': `${wheelRadius - sizeofEdge}px`,\n            'transform': `rotate(${(index) * degreePerContents}deg)`,\n            'borderColor': `${colorCodeTemp} transparent`,\n        };\n\n        styleObjectArray.push(style);\n    });\n\n\n    const wheelSpin = () => {\n        if (wheelState == 1) {\n            // the Whell is spinning!\n            return;\n        }\n        countofSpins+=1;\n        const rndSpin = Math.floor(Math.random() * (360)) + 1;\n        const newSpin = (5000 * countofSpins) + rndSpin;\n        dispatch(wheelSlice.actions.setWheelState(1));\n        dispatch(wheelSlice.actions.setRotation(newSpin));\n        setTimeout(() => {\n            dispatch(wheelSlice.actions.setWheelState(0)); getResult(newSpin);\n        }, 10000);\n    };\n    const getResult = (spin) => {\n        let resultDegree = spin % 360; // clamping WheelRotation to 0 between 360\n        const degreePerContent = 360 / wheelContents.length; // the size of each pies\n        resultDegree -= degreePerContent / 2; // handling negative numbers\n        resultDegree = 360 - resultDegree;\n        let temp = resultDegree / degreePerContent;\n        temp = Math.floor(temp);\n        const result = wheelContents[temp];\n        dispatch(appSlice.actions.handleInputField(result));\n        dispatch(appSlice.actions.toggleWheel());\n        props.trySearchFunc(result);\n    };\n    const setToSolo = () => {\n        if (wheelState == 1) {\n            // the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsSolo));\n    };\n    const setToParty = () => {\n        if (wheelState == 1) {\n            // the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsParty));\n    };\n    return (\n        <div id='wrapper'>\n            <div id='buttonholder'>\n                <span onClick={setToSolo} id='button-1'>一人で</span>\n                <span onClick={setToParty} id='button-2'>みんなで</span>\n            </div>\n            <div id='tri'></div>\n            <div id='wheel' onClick={wheelSpin}>\n                <div id='inner-wheel' style={{\n                    transform: `rotate(${wheelRotation}deg)`,\n                }}>\n                    {wheelContents.map((value, index) => <div style=\n                        {styleObjectArray[index]}\n                        key={index}\n                        id={`content${index}`}>\n                        <span>{value}</span></div>)}\n                </div>\n                <div id='mid-wheel' >\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}