{"ast":null,"code":"import React,{useEffect}from'react';import{useSelector,useDispatch}from'react-redux';import mapSlice from'../../redux/mapSlice';import{createMapInstance}from'../logics/map';import AppBar from'../templates/appBar';import Gmap from'../parts/gMap';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var shouldMapInitialize=true;var map;var userLoc;export default function MapView(){var dispatch=useDispatch();var isUserLocRequested=useSelector(function(state){return state.mapSlice.isUserLocRequested;});useEffect(function(){if(shouldMapInitialize){map=createMapInstance();shouldMapInitialize=false;}if(isUserLocRequested){getUserLocationPromise.then(function(value){userLoc={lat:value.coords.latitude,lng:value.coords.longitude};console.log('user loc obtained');map.setZoom(15);map.panTo(userLoc);}).catch(function(value){console.log('unable to obtain the user position');}).finally(function(){dispatch(mapSlice.actions.requestUserLoc(false));});}});return/*#__PURE__*/_jsxs(\"div\",{id:\"page\",children:[/*#__PURE__*/_jsx(AppBar,{}),/*#__PURE__*/_jsx(Gmap,{})]});}export var getUserLocationPromise=new Promise(function(resolve,reject){navigator.geolocation.getCurrentPosition(resolve,reject);});","map":{"version":3,"names":["React","useEffect","useSelector","useDispatch","mapSlice","createMapInstance","AppBar","Gmap","shouldMapInitialize","map","userLoc","MapView","dispatch","isUserLocRequested","state","getUserLocationPromise","then","value","lat","coords","latitude","lng","longitude","console","log","setZoom","panTo","catch","finally","actions","requestUserLoc","Promise","resolve","reject","navigator","geolocation","getCurrentPosition"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/views/mapView.jsx"],"sourcesContent":["import React, {useEffect} from 'react';\nimport {useSelector, useDispatch} from 'react-redux';\nimport mapSlice from '../../redux/mapSlice';\nimport {createMapInstance} from '../logics/map';\nimport AppBar from '../templates/appBar';\nimport Gmap from '../parts/gMap';\n\nlet shouldMapInitialize = true;\nlet map;\nlet userLoc;\nexport default function MapView() {\n    const dispatch = useDispatch();\n    const isUserLocRequested = useSelector((state) => state.mapSlice.isUserLocRequested);\n    useEffect(() => {\n        if (shouldMapInitialize) {\n            map = createMapInstance();\n            shouldMapInitialize = false;\n        }\n        if (isUserLocRequested) {\n            getUserLocationPromise.then((value) => {\n                userLoc = {\n                    lat: value.coords.latitude,\n                    lng: value.coords.longitude,\n                };\n                console.log('user loc obtained');\n                map.setZoom(15);\n                map.panTo(userLoc);\n            }).catch((value) => {\n                console.log('unable to obtain the user position');\n            }).finally(() => {\n                dispatch(mapSlice.actions.requestUserLoc(false));\n            });\n        }\n    });\n    return (\n        <div id=\"page\">\n            <AppBar></AppBar>\n            <Gmap></Gmap>\n        </div>\n    );\n}\nexport const getUserLocationPromise = new Promise((resolve, reject) => {\n    navigator.geolocation.getCurrentPosition(resolve, reject);\n});\n"],"mappings":"AAAA,MAAOA,MAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAAQC,WAAR,CAAqBC,WAArB,KAAuC,aAAvC,CACA,MAAOC,SAAP,KAAqB,sBAArB,CACA,OAAQC,iBAAR,KAAgC,eAAhC,CACA,MAAOC,OAAP,KAAmB,qBAAnB,CACA,MAAOC,KAAP,KAAiB,eAAjB,C,wFAEA,GAAIC,oBAAmB,CAAG,IAA1B,CACA,GAAIC,IAAJ,CACA,GAAIC,QAAJ,CACA,cAAe,SAASC,QAAT,EAAmB,CAC9B,GAAMC,SAAQ,CAAGT,WAAW,EAA5B,CACA,GAAMU,mBAAkB,CAAGX,WAAW,CAAC,SAACY,KAAD,QAAWA,MAAK,CAACV,QAAN,CAAeS,kBAA1B,EAAD,CAAtC,CACAZ,SAAS,CAAC,UAAM,CACZ,GAAIO,mBAAJ,CAAyB,CACrBC,GAAG,CAAGJ,iBAAiB,EAAvB,CACAG,mBAAmB,CAAG,KAAtB,CACH,CACD,GAAIK,kBAAJ,CAAwB,CACpBE,sBAAsB,CAACC,IAAvB,CAA4B,SAACC,KAAD,CAAW,CACnCP,OAAO,CAAG,CACNQ,GAAG,CAAED,KAAK,CAACE,MAAN,CAAaC,QADZ,CAENC,GAAG,CAAEJ,KAAK,CAACE,MAAN,CAAaG,SAFZ,CAAV,CAIAC,OAAO,CAACC,GAAR,CAAY,mBAAZ,EACAf,GAAG,CAACgB,OAAJ,CAAY,EAAZ,EACAhB,GAAG,CAACiB,KAAJ,CAAUhB,OAAV,EACH,CARD,EAQGiB,KARH,CAQS,SAACV,KAAD,CAAW,CAChBM,OAAO,CAACC,GAAR,CAAY,oCAAZ,EACH,CAVD,EAUGI,OAVH,CAUW,UAAM,CACbhB,QAAQ,CAACR,QAAQ,CAACyB,OAAT,CAAiBC,cAAjB,CAAgC,KAAhC,CAAD,CAAR,CACH,CAZD,EAaH,CACJ,CApBQ,CAAT,CAqBA,mBACI,aAAK,EAAE,CAAC,MAAR,wBACI,KAAC,MAAD,IADJ,cAEI,KAAC,IAAD,IAFJ,GADJ,CAMH,CACD,MAAO,IAAMf,uBAAsB,CAAG,GAAIgB,QAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CACnEC,SAAS,CAACC,WAAV,CAAsBC,kBAAtB,CAAyCJ,OAAzC,CAAkDC,MAAlD,EACH,CAFqC,CAA/B"},"metadata":{},"sourceType":"module"}