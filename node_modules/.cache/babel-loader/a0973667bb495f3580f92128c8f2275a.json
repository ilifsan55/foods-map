{"ast":null,"code":"import React,{useEffect}from'react';import Box from'@mui/material/Box';import Drawer from'@mui/material/Drawer';import{useSelector,useDispatch}from'react-redux';import{appSlice}from'../../redux/appSlice';import{wheelSlice}from'../../redux/wheelSlice';import'./style/wheel.css';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var countofSpins=0;export default function Wheel(props){var wheelToggle=useSelector(function(state){return state.app.wheelToggle;});return/*#__PURE__*/_jsx(Drawer,{anchor:\"right\",open:wheelToggle,variant:\"persistent\",PaperProps:{sx:{marginTop:8,width:600,height:600}},children:/*#__PURE__*/_jsx(Box,{children:/*#__PURE__*/_jsx(WheelMain,{trySearchFunc:props.trySearchFunc})})});}function WheelMain(props){useEffect(function(){});var wheelContentsSolo=['ラーメン','カレー','ハンバーガー','牛丼','そば','ドーナツ','うどん','中華'];var wheelContentsParty=['焼肉','回転寿司','イタリアン','ハンバーガー','中華','和食','ラーメン','インド料理'];var colorCode=['#FF6961','#FFb480','#F8f38d','#42d6a4','#08cad1','#59adf6','#9d94ff','#c780e8'];var wheelRadius=200;// in px\nvar wheelRotation=useSelector(function(state){return state.wheelSlice.wheelRotation;});var wheelState=useSelector(function(state){return state.wheelSlice.wheelState;});var wheelContents=useSelector(function(state){return state.wheelSlice.wheelContents;});var dispatch=useDispatch();var styleObjectArray=[];var degreePerContents=360/wheelContents.length;var polygon=Math.tan(3.14/wheelContents.length);var sizeofEdge=polygon*wheelRadius;wheelContents.forEach(function(value,index){var colorCode_temp=colorCode[index];if(colorCode_temp==undefined){colorCode_temp='#FFFFFF';}var style={'borderWidth':\"200px \".concat(sizeofEdge,\"px 0\"),'transformOrigin':\"\".concat(sizeofEdge,\"px 200px\"),'left':\"\".concat(wheelRadius-sizeofEdge,\"px\"),'transform':\"rotate(\".concat(index*degreePerContents,\"deg)\"),'borderColor':\"\".concat(colorCode_temp,\" transparent\")};styleObjectArray.push(style);});var wheelSpin=function wheelSpin(){if(wheelState==1){//the Whell is spinning!\nreturn;}countofSpins+=1;var newSpin=5000*countofSpins;console.log(newSpin);var rndSpin=Math.floor(Math.random()*360)+1;var intervalID=setTimeout(function(){dispatch(wheelSlice.actions.setWheelState(0));getResult();},10000);dispatch(wheelSlice.actions.setWheelState(1));dispatch(wheelSlice.actions.setRotation(newSpin+rndSpin));};var getResult=function getResult(){var resultDegree=wheelRotation%360;var degreePerContent=360/wheelContents.length;resultDegree-=degreePerContent/2;var result='Error';resultDegree=360-resultDegree;var temp=resultDegree/degreePerContent;temp=Math.floor(temp);result=wheelContents[temp];dispatch(appSlice.actions.handleInputField(result));dispatch(appSlice.actions.toggleWheel());props.trySearchFunc();console.log(result);};var setToSolo=function setToSolo(){if(wheelState==1){//the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsSolo));};var setToParty=function setToParty(){if(wheelState==1){//the Whell is spinning!\nreturn;}dispatch(wheelSlice.actions.setContents(wheelContentsParty));};return/*#__PURE__*/_jsxs(\"div\",{id:\"wrapper\",children:[/*#__PURE__*/_jsxs(\"div\",{id:\"buttonholder\",children:[/*#__PURE__*/_jsx(\"span\",{onClick:setToSolo,id:\"button-1\",children:\"\\u4E00\\u4EBA\\u3067\"}),/*#__PURE__*/_jsx(\"span\",{onClick:setToParty,id:\"button-2\",children:\"\\u307F\\u3093\\u306A\\u3067\"})]}),/*#__PURE__*/_jsx(\"div\",{id:\"tri\"}),/*#__PURE__*/_jsxs(\"div\",{id:\"wheel\",onClick:wheelSpin,children:[/*#__PURE__*/_jsx(\"div\",{id:\"inner-wheel\",style:{transform:\"rotate(\".concat(wheelRotation,\"deg)\")},children:wheelContents.map(function(value,index){return/*#__PURE__*/_jsx(\"div\",{style:styleObjectArray[index],id:\"content\".concat(index),children:/*#__PURE__*/_jsx(\"span\",{children:value})},index);})}),/*#__PURE__*/_jsx(\"div\",{id:\"mid-wheel\"})]})]});}","map":{"version":3,"names":["React","useEffect","Box","Drawer","useSelector","useDispatch","appSlice","wheelSlice","countofSpins","Wheel","props","wheelToggle","state","app","sx","marginTop","width","height","trySearchFunc","WheelMain","wheelContentsSolo","wheelContentsParty","colorCode","wheelRadius","wheelRotation","wheelState","wheelContents","dispatch","styleObjectArray","degreePerContents","length","polygon","Math","tan","sizeofEdge","forEach","value","index","colorCode_temp","undefined","style","push","wheelSpin","newSpin","console","log","rndSpin","floor","random","intervalID","setTimeout","actions","setWheelState","getResult","setRotation","resultDegree","degreePerContent","result","temp","handleInputField","toggleWheel","setToSolo","setContents","setToParty","transform","map"],"sources":["/Users/kokiyamamoto/Desktop/projects/FoodsMap/src/components/parts/wheel.jsx"],"sourcesContent":["import React, { useEffect } from 'react';\nimport Box from '@mui/material/Box';\nimport Drawer from '@mui/material/Drawer';\nimport { useSelector, useDispatch } from 'react-redux';\nimport { appSlice } from '../../redux/appSlice';\nimport { wheelSlice } from '../../redux/wheelSlice';\nimport './style/wheel.css'\n\nlet countofSpins = 0;\n\nexport default function Wheel(props) {\n\n\n    let wheelToggle = useSelector(state => state.app.wheelToggle);\n    return (\n\n        <Drawer\n            anchor='right'\n            open={wheelToggle}\n            variant=\"persistent\"\n            PaperProps={{\n                sx: {\n                    marginTop: 8,\n                    width: 600,\n                    height:600                }\n            }}\n        >\n\n            <Box>\n                <WheelMain trySearchFunc={props.trySearchFunc}></WheelMain>\n            </Box>\n        </Drawer>\n\n    )\n\n\n}\n\nfunction WheelMain(props) {\n\n    useEffect(() => {\n\n        \n    })\n\n    const wheelContentsSolo = ['ラーメン', 'カレー', 'ハンバーガー', '牛丼', 'そば', 'ドーナツ', 'うどん', '中華'];\n    const wheelContentsParty = ['焼肉', '回転寿司', 'イタリアン', 'ハンバーガー', '中華', '和食', 'ラーメン', 'インド料理'];\n\n\n    const colorCode = ['#FF6961', '#FFb480', '#F8f38d', '#42d6a4', '#08cad1', '#59adf6', '#9d94ff', '#c780e8'];\n    const wheelRadius = 200; // in px\n\n\n    let wheelRotation = useSelector(state => state.wheelSlice.wheelRotation);\n    let wheelState = useSelector(state => state.wheelSlice.wheelState);\n    let wheelContents = useSelector(state => state.wheelSlice.wheelContents);\n    const dispatch = useDispatch();\n\n    let styleObjectArray = [];\n    let degreePerContents = 360 / wheelContents.length;\n    let polygon = Math.tan(3.14 / wheelContents.length);\n    let sizeofEdge = polygon * wheelRadius;\n\n    wheelContents.forEach((value, index) => {\n\n        let colorCode_temp = colorCode[index]\n        if (colorCode_temp == undefined) {\n            colorCode_temp = '#FFFFFF';\n        }\n\n        let style = {\n            'borderWidth': `200px ${sizeofEdge}px 0`,\n            'transformOrigin': `${sizeofEdge}px 200px`,\n            'left': `${wheelRadius - sizeofEdge}px`,\n            'transform': `rotate(${(index) * degreePerContents}deg)`,\n            'borderColor': `${colorCode_temp} transparent`\n        }\n\n        styleObjectArray.push(style);\n    })\n\n\n    const wheelSpin = () => {\n\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n\n        countofSpins+=1;\n        let newSpin = 5000 * countofSpins;\n        console.log(newSpin);\n        let rndSpin = Math.floor(Math.random() * (360)) + 1;\n        let intervalID = setTimeout(() => { dispatch(wheelSlice.actions.setWheelState(0)); getResult(); }, 10000)\n        dispatch(wheelSlice.actions.setWheelState(1))\n        dispatch(wheelSlice.actions.setRotation(newSpin + rndSpin));\n\n    }\n    \n    const getResult = () => {\n        \n        let resultDegree = wheelRotation % 360;\n        let degreePerContent = 360 / wheelContents.length;\n        resultDegree -= degreePerContent / 2;\n        let result = 'Error';\n    \n        resultDegree = 360 - resultDegree;\n    \n        let temp = resultDegree / degreePerContent;\n    \n        temp = Math.floor(temp);\n        result = wheelContents[temp];\n\n        dispatch(appSlice.actions.handleInputField(result));\n        dispatch(appSlice.actions.toggleWheel());\n        props.trySearchFunc();\n        console.log(result);\n    \n\n      \n\n    }\n\n\n    const setToSolo = () => {\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsSolo));\n    }\n    const setToParty = () => {\n        if (wheelState == 1) {\n            //the Whell is spinning!\n            return;\n        }\n        dispatch(wheelSlice.actions.setContents(wheelContentsParty));\n    }\n\n    return (\n        <div id='wrapper'>\n            <div id='buttonholder'>\n                <span onClick={setToSolo} id='button-1'>一人で</span>\n                <span onClick={setToParty} id='button-2'>みんなで</span>\n            </div>\n            <div id='tri'></div>\n            <div id='wheel' onClick={wheelSpin}>\n                <div id='inner-wheel' style={{\n                    transform: `rotate(${wheelRotation}deg)`,\n                }}>\n                    {wheelContents.map((value, index) => <div style=\n                        {styleObjectArray[index]}\n                        key={index}\n                        id={`content${index}`}>\n                        <span>{value}</span></div>)}\n                </div>\n                <div id='mid-wheel' >\n                </div>\n            </div>\n        </div>\n    )\n}"],"mappings":"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"},"metadata":{},"sourceType":"module"}